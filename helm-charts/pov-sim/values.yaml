# Default values for pov-sim Helm chart

# Global settings
global:
  namespace: pov-project

# Airlines service configuration
airlines:
  enabled: true
  replicaCount: 1
  image:
    repository: pov-sim-airlines
    tag: latest
    pullPolicy: Always
  service:
    type: ClusterIP
    port: 8080
    targetPort: 8080
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  livenessProbe:
    enabled: true
    httpGet:
      path: /actuator/health
      port: 8080
    initialDelaySeconds: 60
    periodSeconds: 10
  readinessProbe:
    enabled: true
    httpGet:
      path: /actuator/health
      port: 8080
    initialDelaySeconds: 30
    periodSeconds: 5

# Flights service configuration
flights:
  enabled: true
  replicaCount: 1
  image:
    repository: pov-sim-flights
    tag: latest
    pullPolicy: Always
  service:
    type: ClusterIP
    port: 5001
    targetPort: 5001
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "250m"
  livenessProbe:
    enabled: true
    httpGet:
      path: /health
      port: 5001
    initialDelaySeconds: 30
    periodSeconds: 10
  readinessProbe:
    enabled: true
    httpGet:
      path: /health
      port: 5001
    initialDelaySeconds: 15
    periodSeconds: 5

# Frontend service configuration
frontend:
  enabled: true
  replicaCount: 1
  image:
    repository: pov-sim-frontend
    tag: latest
    pullPolicy: Always
  service:
    type: LoadBalancer
    port: 3000
    targetPort: 3000
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "250m"
  livenessProbe:
    enabled: true
    httpGet:
      path: /
      port: 3000
    initialDelaySeconds: 30
    periodSeconds: 10
  readinessProbe:
    enabled: true
    httpGet:
      path: /
      port: 3000
    initialDelaySeconds: 15
    periodSeconds: 5
  env:
    - name: REACT_APP_AIRLINES_URL
      value: "http://airlines:8080"
    - name: REACT_APP_FLIGHTS_URL
      value: "http://flights:5001"

# Ingress configuration (optional)
ingress:
  enabled: false
  className: nginx
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - host: pov-sim.local
      paths:
        - path: /
          pathType: Prefix
          service: frontend
  tls: []
    # - secretName: pov-sim-tls
    #   hosts:
    #     - pov-sim.local

# ServiceAccount configuration
serviceAccount:
  create: true
  annotations: {}
  name: ""

# Pod security context
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

# Security context
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: false

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity rules
affinity: {}
